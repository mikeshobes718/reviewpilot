option_settings:
  aws:elasticbeanstalk:application:environment:
    NODE_ENV: production
    NPM_USE_PRODUCTION: false
  aws:elasticbeanstalk:environment:proxy:staticfiles:
    /static: /static
    /_next: /_next
    /favicon.ico: /favicon.ico
  aws:elasticbeanstalk:environment:proxy:
    ProxyServer: nginx
  aws:autoscaling:launchconfiguration:
    InstanceType: t3.small
  aws:ec2:instances:
    InstanceTypes: t3.small
    EnableSpot: false

container_commands:
  01_install_dependencies:
    command: "npm ci --include=dev"
  02_build_app:
    command: "npm run build"
  03_prune_dependencies:
    command: "npm prune --omit=dev"
